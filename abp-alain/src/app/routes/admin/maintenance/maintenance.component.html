<page-header></page-header>
<nz-card>
    <nz-tabset [nzTabBarExtraContent]="extraTemplate" [nzSelectedIndex]="selectedIndex" (nzSelectChange)="changeSelectIndex($event)">
        <nz-tab nzTitle="{{l('Caches')}}"  (click)="selectedIndexChange()">
            <nz-list [nzDataSource]="caches" nzBordered nzSize="small" [nzRenderItem]="item">
                <ng-template #item let-item>
                    <nz-list-item [nzContent]="item.name" [nzActions]="[editAction]">
                        <ng-template #editAction>
                            <button nz-button [nzType]="'primary'" (click)="clearCache(item.name);">
                                {{l("Clear")}}
                            </button>
                        </ng-template>
                    </nz-list-item>
                </ng-template>
            </nz-list>
        </nz-tab>
        <nz-tab nzTitle="{{l('WebSiteLogs')}}" (click)="selectedIndexChange()">
                <div class="web-log-view full-height" id="web-log-view">
                    <span class="log-line" *ngFor="let log of logs">
                        <nz-tag [nzColor]="getLogClass(log)">{{getLogType(log)}}</nz-tag>
                        {{getRawLogContent(log)}}
                    </span>
                </div>
        </nz-tab>
    </nz-tabset>
    <ng-template #extraTemplate>
        <button *ngIf="selectedIndex==0" nz-button [nzType]="'primary'" (click)="clearAllCaches()">
            <i class="anticon anticon-close-circle-o"></i>{{l("ClearAll")}}
        </button>
        <button  *ngIf="selectedIndex==1" nz-button [nzType]="'primary'" (click)="downloadWebLogs()">
            <i class="anticon anticon-download"></i> {{l("DownloadAll")}}
        </button>
        <button *ngIf="selectedIndex==1" nz-button [nzType]="'primary'" (click)="getWebLogs()">
            <i class="anticon anticon-sync"></i> {{l("Refresh")}}
        </button>
    </ng-template>
</nz-card>